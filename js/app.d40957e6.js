(function(e){function t(t){for(var o,r,a=t[0],c=t[1],h=t[2],d=0,u=[];d<a.length;d++)r=a[d],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&u.push(n[r][0]),n[r]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);l&&l(t);while(u.length)u.shift()();return s.push.apply(s,h||[]),i()}function i(){for(var e,t=0;t<s.length;t++){for(var i=s[t],o=!0,a=1;a<i.length;a++){var c=i[a];0!==n[c]&&(o=!1)}o&&(s.splice(t--,1),e=r(r.s=i[0]))}return e}var o={},n={app:0},s=[];function r(t){if(o[t])return o[t].exports;var i=o[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=o,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(i,o,function(t){return e[t]}.bind(null,o));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/maze/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var h=0;h<a.length;h++)t(a[h]);var l=c;s.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},3946:function(e,t,i){"use strict";var o=i("e475"),n=i.n(o);n.a},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var o=i("2b0e"),n=i("bc3a"),s=i.n(n),r=i("a7fe"),a=i.n(r),c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("aplayer",{attrs:{autoplay:"",mini:"",repeat:"repeat-one",music:{title:"Background",artist:"Game",src:"https://bestian.github.io/maze/happy.mp3"}}}),i("Scene")],1)},h=[],l=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"scene"},[o("div",{attrs:{id:"ctrl"}},[o("button",{class:{active:"up"==e.m},attrs:{id:"up"},on:{click:function(t){e.move("z",-5),e.m="up"}}},[e._v(" 前 ")]),o("button",{class:{active:"down"==e.m},attrs:{id:"down"},on:{click:function(t){e.move("z",5),e.m="down"}}},[e._v(" 後 ")]),o("button",{class:{active:"left"==e.m},attrs:{id:"left"},on:{click:function(t){e.move("x",-5),e.m="left"}}},[e._v(" 左 ")]),o("button",{class:{active:"right"==e.m},attrs:{id:"right"},on:{click:function(t){e.move("x",5),e.m="right"}}},[e._v(" 右 ")])]),o("div",{attrs:{id:"spell"}},[o("button",{class:{active:e.sup},attrs:{id:"super"},on:{click:function(t){return e.superman()}}},[e._v(" 神 ")])]),o("div",{attrs:{id:"lev"}},[e._v(" 目前"+e._s(e.lev)+"級 "),o("br"),e._v(" 目前食物:"+e._s(e.food)+" "),o("br"),e._v(" 剩餘時間:"+e._s(e.timer)+"秒 "),o("br"),e._v(" 移動模式:"+e._s(e.fly?"飛行":"步行")+" "),o("br"),e._v(" 特殊能力:"+e._s(e.sup?"穿牆":"無")+" ")]),o("a",{directives:[{name:"show",rawName:"v-show",value:e.win||e.died||e.bombed,expression:"win || died || bombed"}],attrs:{id:"pop"},on:{click:function(t){return e.again()}}},[o("img",{directives:[{name:"show",rawName:"v-show",value:e.win,expression:"win"}],attrs:{src:i("927c")}}),o("img",{directives:[{name:"show",rawName:"v-show",value:e.died,expression:"died"}],attrs:{src:i("ed4b")}}),o("img",{directives:[{name:"show",rawName:"v-show",value:e.bombed,expression:"bombed"}],attrs:{src:i("c6d8")}})]),o("div",{attrs:{id:"three-scene-canvas"}})])},d=[],u=(i("664f"),i("5a89")),p=i("4721"),m={name:"Scene",data:function(){return{sceneCanvas:null,scene:null,camera:null,renderer:null,controls:null,meshArray:[],trapArray:[],me:null,you:null,wing:[],fly:!1,sup:!1,win:!1,died:!1,bombed:!1,audio:null,m:null,lev:0,food:500,timer:300,maze:null,mazes:["maze0.json","maze1.json","maze2.json"],colors:[[3817582,42751,16711739],[3829312,16754176,65339],[4209262,10879231,15359]],borders:[[6975646,3200767,16724075],[6987376,16766512,3211115],[7367326,14037247,3173375]]}},created:function(){this.audio=document.getElementById("audio")},mounted:function(){this.sceneCanvas=document.getElementById("three-scene-canvas"),this.scene=new u["o"],this.camera=new u["l"](75,this.sceneCanvas.getBoundingClientRect().width/this.sceneCanvas.getBoundingClientRect().height,.1,1e3),this.renderer=new u["u"]({antialias:!0,powerPreference:"high-performance"}),this.renderer.outputEncoding=u["v"],this.controls=new p["a"](this.camera,this.renderer.domElement),this.controls.addEventListener("change",this.animateThreeJs),this.renderer.setSize(this.sceneCanvas.offsetWidth,this.sceneCanvas.offsetHeight),this.renderer.setClearColor("#212121"),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=u["k"],this.renderer.shadowMapSoft=!0,this.renderer.shadowMap.autoUpdate=!1,this.renderer.shadowMap.needsUpdate=!0,this.sceneCanvas.append(this.renderer.domElement),localStorage.lev&&(this.lev=localStorage.lev),localStorage.food&&(this.food=localStorage.food),this.reset(this.lev),window.addEventListener("keyup",this.keyup),setInterval(this.go,1e3)},watch:{lev:function(e){localStorage.lev=e},food:function(e){localStorage.food=e}},methods:{superman:function(){this.sup?alert("回到正常模式"):alert("進入超人模式"),this.sup=!this.sup},go:function(){this.timer--,0===this.timer&&(alert("時間到"),this.again())},reset:function(e){var t=this;console.log(e),this.timer=300,this.sup=!1,this.camera.position.set(20,5,-20);while(this.scene.children.length>0)this.scene.remove(this.scene.children[0]);var i=new u["a"](14339327,.5);this.scene.add(i);var o=new u["m"](16548637,1,500);o.position.set(20,100,-20),o.castShadow=!0,o.shadow.radius=1,this.scene.add(o),this.axios.get("./maze"+e+".json").then((function(i){t.maze=i.data,t.meshArray=[],t.trapArray=[];for(var o=0;o<t.maze.length;o++)for(var n=0;n<t.maze[0].length;n++){var s,r,a=new u["j"]({color:13224393});4===t.maze[o][n]&&(a=new u["j"]({color:10526880}));var c=new u["b"](5,2,5);if(s=new u["h"](c,a.clone()),s.position.x=-5*o-10,s.position.y=-22,s.position.z=-5*n+20,s.receiveShadow=!0,t.scene.add(s),1===t.maze[o][n]){var h=Math.floor(3*Math.random());r=t.colors[e][h];var l=new u["j"]({color:r}),d=new u["b"](5,2,5);s=new u["h"](d,l.clone()),s.position.x=-5*o-10,s.position.y=-20,s.position.z=-5*n+20,s.castShadow=!0,t.meshArray.push(s),r=t.borders[e][h];var p=new u["c"](s.geometry),m=new u["e"]({color:r,linewidth:4}),f=new u["f"](p,m);f.renderOrder=1,s.add(f),t.scene.add(s)}if(9===t.maze[o][n]||3===t.maze[o][n]){var v=new u["b"](2,50,2),w=new u["i"]({color:16776960});t.you=new u["h"](v,w.clone()),t.you.position.x=-5*o-10,t.you.position.y=5,t.you.position.z=-5*n+20,t.you.castShadow=!0,3===t.maze[o][n]&&(t.you.end=!0),t.scene.add(t.you)}if(7===t.maze[o][n]){var g=new u["b"](2,50,2),y=new u["i"]({color:16777215}),b=new u["h"](g,y.clone());b.position.x=-5*o-10,b.position.y=5,b.position.z=-5*n+20,b.castShadow=!0,t.wing.push(b),t.scene.add(b)}if(5===t.maze[o][n]){var x=new u["p"](1,32,32),z=new u["i"]({color:255});t.me=new u["h"](x,z.clone()),t.me.position.x=-5*o-10,t.me.position.y=-20,t.me.position.z=-5*n+20,t.me.castShadow=!0,t.scene.add(t.me)}if(4===t.maze[o][n]){var _=new u["p"](1,32,32),S=new u["i"]({color:3158064}),j=new u["h"](_,S.clone());j.position.x=-5*o-10,j.position.y=-21,j.position.z=-5*n+20,j.castShadow=!0,t.trapArray.push(j),t.scene.add(j)}}t.controls.target.set(t.me.position.x,t.me.position.y,t.me.position.z),t.controls.update(),t.animateThreeJs()}))},animateThreeJs:function(){this.renderer.render(this.scene,this.camera),this.renderer.shadowMap.needsUpdate=!0},victory:function(){if(this.you.end){alert("你過關啦！"),this.lev=0,this.fly=!1,this.wing=[],this.win=!0,this.food=500;for(var e,t=this.you.position.x,i=this.you.position.z,o=0;o<[-4,-3,-2,-1,0,1,2,3,4].length;o++)for(var n=0;n<[-4,-3,-2,-1,0,1,2,3,4].length;n++){var s=[13467443,14277097,13615283][Math.floor(3*Math.random())],r=new u["j"]({color:s}),a=new u["b"](5,2,5);e=new u["h"](a,r.clone()),this.meshArray.push(e),e.position.x=t+10*o-10,e.position.y=-5,e.position.z=i-10*n+20,this.scene.add(e)}this.camera.position.set(t,this.me.position.y+50,i),this.controls.update(),this.animateThreeJs()}else alert("你升級啦！"),this.fly=!1,this.wing=[],this.lev++,this.reset(this.lev)},keyup:function(e){37===e.which&&(this.move("x",-5),this.m="left"),38===e.which&&(this.move("z",-5),this.m="up"),39===e.which&&(this.move("x",5),this.m="right"),40===e.which&&(this.move("z",5),this.m="down"),65===e.which&&(this.move("x",-5),this.m="left"),87===e.which&&(this.move("z",-5),this.m="up"),68===e.which&&(this.move("x",5),this.m="right"),83===e.which&&(this.move("z",5),this.m="down"),86===e.which&&this.die()},die:function(){this.died=!0,window.alert("你餓死了")},bomb:function(){this.bombed=!0,window.alert("你掉入陷井了")},again:function(){this.win=!1,this.died=!1,this.bombed=!1,this.lev=0,this.food=500,this.timer=300,this.reset(this.lev)},move:function(e,t){this.sup?this.food-=10:this.food--,0===this.food&&this.die(),this.me.position[e]+=t;for(var i=0;i<this.meshArray.length;i++){var o=new u["t"];o.setFromMatrixPosition(this.meshArray[i].matrixWorld),o.x===this.me.position.x&&o.z===this.me.position.z&&(this.sup||(this.me.position[e]-=t))}for(var n=0;n<this.trapArray.length;n++){var s=new u["t"];s.setFromMatrixPosition(this.trapArray[n].matrixWorld),s.x===this.me.position.x&&s.z===this.me.position.z&&(this.fly||this.bomb())}var r={x:this.me.position.x,z:this.me.position.z};this.camera.position.set(r.x,this.me.position.y+20,r.z),this.controls.target.set(this.me.position.x,this.me.position.y,this.me.position.z),this.controls.update(),this.me.position.x===this.you.position.x&&this.me.position.z===this.you.position.z&&this.victory();for(var a=0;a<this.wing.length;a++){var c=new u["t"];c.setFromMatrixPosition(this.wing[a].matrixWorld),c.x===this.me.position.x&&c.z===this.me.position.z&&(this.fly=!0,this.me.position.y=-15,alert("你起飛了"))}this.animateThreeJs()}}},f=m,v=(i("3946"),i("2877")),w=Object(v["a"])(f,l,d,!1,null,"7e408aca",null),g=w.exports,y=i("0f7d"),b=i.n(y),x={name:"App",components:{Scene:g,Aplayer:b.a},mounted:function(){console.log("hello");for(var e=document.getElementsByClassName("aplayer-icon"),t=0;t<e.length;t++)e[t].setAttribute("name","Play"),e[t].setAttribute("aria-label","Play")}},z=x,_=(i("5c0b"),Object(v["a"])(z,c,h,!1,null,null,null)),S=_.exports,j=i("9483");Object(j["a"])("".concat("/maze/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),o["default"].config.productionTip=!1,o["default"].use(a.a,s.a),new o["default"]({render:function(e){return e(S)}}).$mount("#app")},"5c0b":function(e,t,i){"use strict";var o=i("9c0c"),n=i.n(o);n.a},"927c":function(e,t,i){e.exports=i.p+"img/cat.6276d8ec.jpg"},"9c0c":function(e,t,i){},c6d8:function(e,t,i){e.exports=i.p+"img/trapdoor.b0bde22a.png"},e475:function(e,t,i){},ed4b:function(e,t,i){e.exports=i.p+"img/food.39a7754e.jpg"}});
//# sourceMappingURL=app.d40957e6.js.map